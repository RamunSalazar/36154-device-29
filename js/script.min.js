const promoSlides=document.querySelectorAll(".promo__slide"),promoButtonsWraps=document.querySelectorAll(".promo__button-wrap"),promoButtons=document.querySelectorAll(".promo__button"),serviceButton=document.querySelectorAll(".service__button"),serviceDescription=document.querySelectorAll(".service__description"),writeUsLink=document.querySelector(".write-us__link"),modalFeedbackWrap=document.querySelector(".modal__feedback-wrap"),modalFeedback=modalFeedbackWrap.querySelector(".modal-feedback"),closeFeedbackButton=modalFeedbackWrap.querySelector(".modal-close"),inputName=modalFeedbackWrap.querySelector("input[type=\"text\"]"),inputEmail=modalFeedbackWrap.querySelector("input[type=\"email\"]"),feedbackForm=modalFeedbackWrap.querySelector(".feedback"),textarea=modalFeedbackWrap.querySelector(".form__text"),mapLink=document.querySelector(".contacts__img-link"),modalMap=document.querySelector(".modal__map-wrap"),closeMapButton=modalMap.querySelector(".modal-close"),body=document.querySelector(".page__body");let storageName="",storageEmail="";function promoRemoveClass(){for(let a=0;a<promoButtons.length;a++)promoButtons[a].classList.contains("promo-visibility")&&promoButtons[a].classList.remove("promo-visibility")}function promoAddClass(a){for(let b=0;b<promoButtonsWraps.length;b++)for(let c=0;c<promoButtonsWraps[b].children.length;c++)promoButtonsWraps[b].children[c]==a&&promoButtonsWraps[c].children[c].classList.add("promo-visibility")}function promoFindIndex(a){let b=0;for(let c=0;c<promoButtonsWraps.length;c++)for(let d=0;d<promoButtonsWraps[c].children.length;d++)if(promoButtonsWraps[c].children[d]==a){b=c;break}return b}function promoFindIndexSlide(a){let b=0;for(let c=0;c<promoButtonsWraps.length;c++)for(let d=0;d<promoButtonsWraps[c].children.length;d++)if(promoButtonsWraps[c].children[d]==a){b=d;break}return b}function serviceRemoveAddClass(){for(let a=0;a<serviceDescription.length;a++)serviceDescription[a].classList.contains("service-visibility")&&(serviceDescription[a].classList.remove("service-visibility"),serviceDescription[a].classList.add("service-hidden"))}function serviceFindIndex(a){let b=0;for(let c=0;c<serviceButton.length;c++)serviceButton[c]==a&&(b=c);return b}function validName(a){return /[А-Я]{1}[а-я]+\s[А-Я]{1}[а-я]+/.test(a)}function validEmail(a){return /[^\@]+\@[^\.]+\..+/.test(a)}try{storageName=localStorage.getItem("name")}catch(a){console.log(a)}try{storageEmail=localStorage.getItem("email")}catch(a){console.log(a)}for(let a=0;a<promoButtons.length;a++){let b=0,c=0;promoButtons[a].addEventListener("click",function(a){promoRemoveClass(),promoAddClass(a.path[0]),b=promoFindIndex(a.path[0]),promoSlides[b].style.display="none",c=promoFindIndexSlide(a.path[0]),promoSlides[c].style.display="grid"})}for(let a,b=0;b<serviceButton.length;b++)a=0,serviceButton[b].addEventListener("click",function(b){serviceRemoveAddClass(),a=serviceFindIndex(b.path[0]),serviceDescription[a].classList.remove("service-hidden"),serviceDescription[a].classList.add("service-visibility")});writeUsLink.addEventListener("click",function(a){a.preventDefault(),body.style.overflow="hidden",modalFeedbackWrap.classList.add("modal-show"),storageName&&!storageEmail?(inputName.value=storageName,inputEmail.focus()):storageName&&storageEmail?(inputName.value=storageName,inputEmail.value=storageEmail,textarea.focus()):inputName.focus()}),closeFeedbackButton.addEventListener("click",function(a){a.preventDefault(),body.style.overflow="visible",modalFeedbackWrap.classList.remove("modal-show"),modalFeedback.classList.remove("modal-error")}),feedbackForm.addEventListener("submit",function(a){let b=validName(inputName.value),c=validEmail(inputEmail.value);b||c?b&&!c?(a.preventDefault(),modalFeedback.classList.add("modal-error"),localStorage.setItem("name",inputName.value),inputEmail.style.backgroundColor="#F6DADA"):!b&&c?(a.preventDefault(),modalFeedback.classList.add("modal-error"),localStorage.setItem("email",inputEmail.value),inputName.style.backgroundColor="#F6DADA"):b&&c&&(localStorage.setItem("name",inputName.value),localStorage.setItem("email",inputEmail.value)):(a.preventDefault(),modalFeedback.classList.add("modal-error"),inputName.style.backgroundColor="#F6DADA",inputEmail.style.backgroundColor="#F6DADA")}),mapLink.addEventListener("click",function(a){a.preventDefault(),body.style.overflow="hidden",modalMap.classList.add("modal-show")}),closeMapButton.addEventListener("click",function(a){a.preventDefault(),body.style.overflow="visible",modalMap.classList.remove("modal-show")}),window.addEventListener("keydown",function(a){27==a.keyCode&&(modalFeedbackWrap.classList.contains("modal-show")?(a.preventDefault(),body.style.overflow="visible",modalFeedbackWrap.classList.remove("modal-show"),modalFeedback.classList.remove("modal-error")):modalMap.classList.contains("modal-show")&&(a.preventDefault(),body.style.overflow="visible",modalMap.classList.remove("modal-show")))});
